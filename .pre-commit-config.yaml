repos:
  - repo: https://github.com/psf/black
    rev: 24.4.0
    hooks:
      - id: black
        name: "ğŸ–¤ black"
        language_version: python3
        additional_dependencies: []
        args: [sql]
  - repo: https://github.com/sqlfluff/sqlfluff
    rev: 3.0.7
    hooks:
      - id: sqlfluff-lint
        name: "ğŸ§¹ sqlfluff-lint"
        entry: sqlfluff lint
        language: python
        types: [sql]
      - id: sqlfluff-fix
        name: "ğŸ› ï¸ sqlfluff-fix"
        entry: sqlfluff fix --force
        language: python
        types: [sql]
  - repo: local
    hooks:
      - id: remove-core-file
        name: "ğŸ—‘ï¸ Remove core file if it exists"
        entry: bash -c '[[ -f core && ! -d core ]] && rm core || exit 0'
        language: system
        stages:
          - pre-commit
  - repo: local
    hooks:
      - id: ensure-utf8-encoding
        name: "ğŸŒ Ensure UTF-8 encoding declaration in Python files"
        entry: bash scripts/encoding_check.sh
        language: system
        types: [python]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: ensure-license-header
        name: "ğŸ“„ Ensure license, copyright, and Kartoza link"
        entry: bash scripts/license_check.sh
        language: system
        types: [python, shell, sql]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: ensure-google-docstrings
        name: "ğŸ“š Ensure Google-style docstrings in Python modules"
        entry: bash scripts/docstrings_check.sh
        language: system
        types: [python]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: code-size-feedback
        name: "ğŸ“ Code Size Feedback"
        entry: bash scripts/codebase_size_check.sh
        language: system
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: test-count-feedback
        name: "ğŸ§ª Test Count Feedback"
        entry: python scripts/commit_test_stats.py
        language: system
        types: [python]
        stages: [pre-commit]
  - repo: https://github.com/PyCQA/isort
    rev: 6.0.1
    hooks:
      - id: isort
        name: "ğŸ“¦ isort - sort Python imports"
        entry: isort --check --diff
        language: python
        types: [python]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: nixfmt
        name: "â„ï¸ Nixfmt (RFC style)"
        description: Format Nix code with nixfmt-rfc-style
        entry: nixfmt
        language: system
        args: ["--"]
        types: [nix]
  - repo: local
    hooks:
      - id: markdownlint
        name: "ğŸ“ markdownlint - Markdown linter"
        entry: markdownlint
        language: system
        types: [markdown]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: cspell
        name: "ğŸ”¤ cspell - Spell checker for Markdown"
        entry: cspell --no-progress --no-summary
        language: system
        types: [markdown]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: yamllint
        name: "ğŸ” yamllint - YAML linter"
        entry: yamllint
        language: system
        types: [yaml]
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: actionlint
        name: "ğŸ¤– actionlint - GitHub Actions workflow linter"
        entry: actionlint
        language: system
        types: [yaml]
        files: ^\.github/workflows/.*\.ya?ml$
        stages: [pre-commit]
